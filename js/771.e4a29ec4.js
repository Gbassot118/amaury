"use strict";(self["webpackChunkjeux_educatifs"]=self["webpackChunkjeux_educatifs"]||[]).push([[771],{771:(i,t,r)=>{r.r(t),r.d(t,{default:()=>b});var e=r(6768),n=r(4232),a=r(5130),o={class:"game-container"},s={class:"game-area"},l={class:"container-wrapper playground-wrapper"},d={class:"children-container"},c=["onDragstart"],u={class:"classrooms-container"},h={class:"container-title"},m=["onDrop"],v={class:"required-count"},f={class:"children-in-classroom"},p={key:0,class:"victory-message"};function g(i,t,r,g,C,k){var y=(0,e.g2)("router-link"),D=(0,e.g2)("Fireworks");return(0,e.uX)(),(0,e.CE)("div",o,[t[8]||(t[8]=(0,e.Lk)("h1",null,"Jeu des Classes",-1)),t[9]||(t[9]=(0,e.Lk)("div",{class:"instructions"},[(0,e.Lk)("p",null,"Attrape les enfants qui bougent dans la cour et fais-les glisser dans la bonne classe")],-1)),(0,e.Lk)("div",s,[(0,e.Lk)("div",l,[t[3]||(t[3]=(0,e.Lk)("h3",{class:"container-title"},"Cour de R√©cr√©ation",-1)),(0,e.Lk)("div",d,[t[2]||(t[2]=(0,e.Fv)('<div class="playground-decoration" data-v-9b4a9d60><div class="playground-icon" data-v-9b4a9d60>‚öΩ</div><div class="playground-icon" data-v-9b4a9d60>üèÄ</div><div class="playground-icon" data-v-9b4a9d60>üå≥</div><div class="playground-icon" data-v-9b4a9d60>ü™Å</div></div>',1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(C.children,function(i,t){return(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:t,class:(0,n.C4)(["child",{placed:i.placed}]),draggable:"true",onDragstart:function(t){return k.dragStart(t,i)},style:(0,n.Tr)({position:"absolute",left:i.playgroundPosition.x+"px",top:i.playgroundPosition.y+"px",transition:"left 2s, top 2s"})},(0,n.v_)(i.icon),47,c)),[[a.aG,!i.placed]])}),128))])]),(0,e.Lk)("div",u,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(C.classrooms,function(i,r){return(0,e.uX)(),(0,e.CE)("div",{key:r,class:"classroom-wrapper"},[(0,e.Lk)("h3",h,"Salle de Classe "+(0,n.v_)(r+1),1),(0,e.Lk)("div",{class:(0,n.C4)(["classroom",{filled:i.currentCount===i.requiredCount,animated:i.animated}]),style:(0,n.Tr)({height:40*i.requiredCount+"px"}),onDragover:t[0]||(t[0]=(0,a.D$)(function(){},["prevent"])),onDrop:function(t){return k.dropChild(t,i)}},[t[4]||(t[4]=(0,e.Fv)('<div class="classroom-decoration" data-v-9b4a9d60><div class="classroom-icon" data-v-9b4a9d60>üìö</div><div class="classroom-icon" data-v-9b4a9d60>üìù</div><div class="classroom-icon" data-v-9b4a9d60>üßÆ</div><div class="classroom-icon" data-v-9b4a9d60>üîç</div></div>',1)),(0,e.Lk)("div",v,(0,n.v_)(i.requiredCount),1),(0,e.Lk)("div",f,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(k.childrenInClassroom(i),function(i){return(0,e.uX)(),(0,e.CE)("div",{key:i.id,class:"child-in-classroom",style:(0,n.Tr)({position:"absolute",left:i.position.x+"px",top:i.position.y+"px"})},(0,n.v_)(i.icon),5)}),128))])],46,m)])}),128))])]),C.gameCompleted?((0,e.uX)(),(0,e.CE)("div",p,[t[6]||(t[6]=(0,e.Lk)("h2",null,"Bravo !",-1)),t[7]||(t[7]=(0,e.Lk)("p",null,"Tu as r√©ussi √† remplir toutes les classes !",-1)),(0,e.Lk)("button",{onClick:t[1]||(t[1]=function(){return k.resetGame&&k.resetGame.apply(k,arguments)}),class:"reset-button"},"Rejouer"),(0,e.bF)(y,{to:"/",class:"home-button"},{default:(0,e.k6)(function(){return t[5]||(t[5]=[(0,e.eW)("Menu Principal")])}),_:1,__:[5]})])):(0,e.Q3)("",!0),C.gameCompleted?((0,e.uX)(),(0,e.Wv)(D,{key:1,ref:"fireworks",class:"fireworks-container"},null,512)):(0,e.Q3)("",!0)])}r(8431),r(2008),r(1629),r(3418),r(8111),r(1148),r(2489),r(7588),r(6099),r(7764),r(3500),r(6031);var C=r(4699);const k={name:"ClassroomGame",components:{Fireworks:C.j},data:function(){return{totalChildren:10,children:[],classrooms:[],currentDraggedChild:null,gameCompleted:!1,fireworksTimer:null,animationTimer:null,childIcons:["üë¶","üëß","üë¶üèª","üëßüèª","üë¶üèº","üëßüèº","üë¶üèΩ","üëßüèΩ","üë¶üèæ","üëßüèæ","üë¶üèø","üëßüèø"]}},created:function(){this.initializeGame()},mounted:function(){document.addEventListener("dragend",this.handleDragEnd),this.startChildrenAnimation()},beforeUnmount:function(){document.removeEventListener("dragend",this.handleDragEnd),this.stopChildrenAnimation()},methods:{initializeGame:function(){var i=this;this.children=Array.from({length:this.totalChildren},function(t,r){var e=Math.floor(Math.random()*i.childIcons.length),n=Math.floor(200*Math.random()),a=Math.floor(200*Math.random());return{id:r,placed:!1,icon:i.childIcons[e],classroomId:null,position:{x:0,y:0},playgroundPosition:{x:n,y:a}}});var t=Math.floor(Math.random()*(this.totalChildren-1))+1,r=this.totalChildren-t;this.classrooms=[{id:1,requiredCount:t,currentCount:0,animated:!1},{id:2,requiredCount:r,currentCount:0,animated:!1}]},dragStart:function(i,t){this.currentDraggedChild=t,i.dataTransfer.setData("text/plain",t.id)},dropChild:function(i,t){if(i.preventDefault(),this.currentDraggedChild&&!this.currentDraggedChild.placed){if(t.currentCount>=t.requiredCount)return this.currentDraggedChild.placed=!1,this.currentDraggedChild.classroomId=null,void(this.currentDraggedChild=null);var r=i.currentTarget.getBoundingClientRect(),e=40,n=i.clientX-r.left-e/2,a=i.clientY-r.top-e/2;this.currentDraggedChild.placed=!0,this.currentDraggedChild.classroomId=t.id,this.currentDraggedChild.position={x:n,y:a},t.currentCount++,t.currentCount===t.requiredCount&&(t.animated=!0,this.classrooms.every(function(i){return i.currentCount===i.requiredCount})&&(this.gameCompleted=!0)),this.currentDraggedChild=null}},startFireworks:function(){var i=this;if(this.$refs.fireworks){var t=this.$refs.fireworks;t.updateOptions({autoresize:!0,opacity:.5,acceleration:1.05,friction:.97,gravity:1.5,particles:50,traceLength:3,traceSpeed:10,explosion:5,intensity:30,flickering:50,lineStyle:"round",hue:{min:0,max:360},delay:{min:30,max:60},rocketsPoint:{min:50,max:50},lineWidth:{explosion:{min:1,max:3},trace:{min:1,max:2}},brightness:{min:50,max:80},decay:{min:.015,max:.03},mouse:{click:!1,move:!1,max:1}}),t.start(),this.fireworksTimer=setTimeout(function(){i.$refs.fireworks&&i.$refs.fireworks.stop()},1e4)}},resetGame:function(){this.$refs.fireworks&&this.$refs.fireworks.stop(),this.fireworksTimer&&(clearTimeout(this.fireworksTimer),this.fireworksTimer=null),this.gameCompleted=!1,this.initializeGame(),this.startChildrenAnimation()},childrenInClassroom:function(i){return this.children.filter(function(t){return t.placed&&t.classroomId===i.id})},handleDragEnd:function(){this.currentDraggedChild&&!this.currentDraggedChild.placed&&(this.currentDraggedChild.placed=!1,this.currentDraggedChild.classroomId=null,this.currentDraggedChild=null)},startChildrenAnimation:function(){var i=this;this.stopChildrenAnimation(),this.animationTimer=setInterval(function(){i.moveChildrenRandomly()},3e3)},stopChildrenAnimation:function(){this.animationTimer&&(clearInterval(this.animationTimer),this.animationTimer=null)},moveChildrenRandomly:function(){var i=this;this.children.forEach(function(t){var r;if(!t.placed&&(null===(r=i.currentDraggedChild)||void 0===r?void 0:r.id)!==t.id){var e=document.querySelector(".children-container");if(e){var n=e.getBoundingClientRect(),a=n.width-40,o=n.height-40,s=Math.floor(Math.random()*a),l=Math.floor(Math.random()*o);t.playgroundPosition={x:s,y:l}}}})}},watch:{gameCompleted:function(i){var t=this;i&&(this.stopChildrenAnimation(),this.$nextTick(function(){t.startFireworks()}))}}};var y=r(1241);const D=(0,y.A)(k,[["render",g],["__scopeId","data-v-9b4a9d60"]]),b=D}}]);
//# sourceMappingURL=771.e4a29ec4.js.map