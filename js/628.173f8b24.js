"use strict";(self["webpackChunkjeux_educatifs"]=self["webpackChunkjeux_educatifs"]||[]).push([[628],{5628:(e,i,a)=>{a.r(i),a.d(i,{default:()=>x});var n=a(6768),t=a(4232),s=a(5130),r={class:"game-container"},o={class:"instructions"},c={class:"game-area"},l={class:"target-number-container"},u={class:"target-number"},d={class:"counter"},m={class:"garden"},h={class:"container-wrapper enclosure-wrapper"},f={class:"animals-container"},k=["onDragstart"],p={key:1,class:"victory-message"};function v(e,i,a,v,g,b){var A=(0,n.g2)("router-link"),T=(0,n.g2)("Fireworks");return(0,n.uX)(),(0,n.CE)("div",r,[i[8]||(i[8]=(0,n.Lk)("h1",null,"Le Jardin des Animaux",-1)),(0,n.Lk)("div",o,[(0,n.Lk)("p",null,"Fais glisser exactement "+(0,t.v_)(g.currentNumber)+" animaux dans le jardin pour gagner",1)]),(0,n.Lk)("div",c,[(0,n.Lk)("div",l,[(0,n.Lk)("div",u,(0,t.v_)(g.currentNumber),1),(0,n.Lk)("div",d,(0,t.v_)(g.placedAnimalsCount)+"/"+(0,t.v_)(g.currentNumber),1)]),(0,n.Lk)("div",{class:"garden-container",onDragover:i[0]||(i[0]=(0,s.D$)(function(){},["prevent"])),onDrop:i[1]||(i[1]=function(e){return b.dropAnimal(e)})},[i[4]||(i[4]=(0,n.Lk)("h3",{class:"container-title"},"Le Jardin",-1)),(0,n.Lk)("div",m,[i[3]||(i[3]=(0,n.Fv)('<div class="garden-decoration" data-v-71be6e9e><div class="garden-icon" data-v-71be6e9e>🌳</div><div class="garden-icon" data-v-71be6e9e>🌷</div><div class="garden-icon" data-v-71be6e9e>🌿</div><div class="garden-icon" data-v-71be6e9e>🌱</div></div>',1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(g.placedAnimals,function(e){return(0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"animal-in-garden",style:(0,t.Tr)({position:"absolute",left:e.position.x+"px",top:e.position.y+"px"})},(0,t.v_)(e.icon),5)}),128))])],32),(0,n.Lk)("div",h,[i[5]||(i[5]=(0,n.Lk)("h3",{class:"container-title"},"Enclos des Animaux",-1)),(0,n.Lk)("div",f,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(g.animals,function(e,i){return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:i,class:(0,t.C4)(["animal",{placed:e.placed}]),draggable:"true",onDragstart:function(i){return b.dragStart(i,e)},style:(0,t.Tr)({position:"absolute",left:e.enclosurePosition.x+"px",top:e.enclosurePosition.y+"px",transition:"left 2s, top 2s"})},(0,t.v_)(e.icon),47,k)),[[s.aG,!e.placed]])}),128))])])]),g.showFeedback?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,t.C4)(["feedback-message",{success:g.feedbackSuccess}])},[(0,n.Lk)("p",null,(0,t.v_)(g.feedbackMessage),1)],2)):(0,n.Q3)("",!0),g.gameCompleted?((0,n.uX)(),(0,n.CE)("div",p,[i[7]||(i[7]=(0,n.Lk)("h2",null,"Bravo !",-1)),(0,n.Lk)("p",null,"Tu as réussi à placer exactement "+(0,t.v_)(g.currentNumber)+" animaux dans le jardin !",1),(0,n.Lk)("button",{onClick:i[2]||(i[2]=function(){return b.resetGame&&b.resetGame.apply(b,arguments)}),class:"reset-button"},"Rejouer"),(0,n.bF)(A,{to:"/",class:"home-button"},{default:(0,n.k6)(function(){return i[6]||(i[6]=[(0,n.eW)("Menu Principal")])}),_:1,__:[6]})])):(0,n.Q3)("",!0),g.gameCompleted?((0,n.uX)(),(0,n.Wv)(T,{key:2,ref:"fireworks",class:"fireworks-container"},null,512)):(0,n.Q3)("",!0)])}var g=a(8653),b=(a(8980),a(1629),a(3418),a(4114),a(8111),a(7588),a(6099),a(7764),a(3500),a(6031),a(4699));const A={name:"AnimalGardenGame",components:{Fireworks:b.j},data:function(){return{totalAnimals:15,animals:[],placedAnimals:[],currentDraggedAnimal:null,currentNumber:1,maxNumber:10,placedAnimalsCount:0,gameCompleted:!1,fireworksTimer:null,animationTimer:null,showFeedback:!1,feedbackMessage:"",feedbackSuccess:!1,feedbackTimer:null,animalIcons:["🐰","🐸","🐦","🐢","🦊","🐿️","🦔","🐝","🦋","🐌"]}},created:function(){this.initializeGame()},mounted:function(){document.addEventListener("dragend",this.handleDragEnd),this.startAnimalsAnimation()},beforeUnmount:function(){document.removeEventListener("dragend",this.handleDragEnd),this.stopAnimalsAnimation(),this.fireworksTimer&&clearTimeout(this.fireworksTimer),this.feedbackTimer&&clearTimeout(this.feedbackTimer)},methods:{initializeGame:function(){var e=this;this.animals=Array.from({length:this.totalAnimals},function(i,a){var n=Math.floor(Math.random()*e.animalIcons.length),t=Math.floor(200*Math.random()),s=Math.floor(200*Math.random());return{id:a,placed:!1,icon:e.animalIcons[n],position:{x:0,y:0},enclosurePosition:{x:t,y:s}}}),this.placedAnimals=[],this.currentNumber=Math.floor(10*Math.random())+1,this.placedAnimalsCount=0,this.gameCompleted=!1,this.showFeedback=!1},dragStart:function(e,i){this.currentDraggedAnimal=i,e.dataTransfer.setData("text/plain",i.id)},dropAnimal:function(e){var i=this;if(e.preventDefault(),this.currentDraggedAnimal&&!this.currentDraggedAnimal.placed){var a=e.currentTarget.getBoundingClientRect(),n=30,t=e.clientX-a.left-n/2,s=e.clientY-a.top-n/2;this.currentDraggedAnimal.placed=!0,this.currentDraggedAnimal.position={x:t,y:s},this.placedAnimals.push((0,g.A)({},this.currentDraggedAnimal)),this.placedAnimalsCount++,this.placedAnimalsCount===this.currentNumber?(this.showSuccessFeedback(),setTimeout(function(){i.gameCompleted=!0,i.$nextTick(function(){i.startFireworks()})},2e3)):this.placedAnimalsCount>this.currentNumber&&(this.showErrorFeedback(),this.returnLastAnimal())}},handleDragEnd:function(){this.currentDraggedAnimal=null},returnLastAnimal:function(){if(this.placedAnimals.length>0){var e=this.placedAnimals.pop(),i=this.animals.findIndex(function(i){return i.id===e.id});-1!==i&&(this.animals[i].placed=!1,this.placedAnimalsCount--)}},showSuccessFeedback:function(){var e=this;this.feedbackSuccess=!0,this.feedbackMessage="Bravo ! C'est le bon nombre d'animaux !",this.showFeedback=!0,this.feedbackTimer&&clearTimeout(this.feedbackTimer),this.feedbackTimer=setTimeout(function(){e.showFeedback=!1},2e3)},showErrorFeedback:function(){var e=this;this.feedbackSuccess=!1,this.feedbackMessage="Tu en as mis un de trop ! Essayons encore.",this.showFeedback=!0,this.feedbackTimer&&clearTimeout(this.feedbackTimer),this.feedbackTimer=setTimeout(function(){e.showFeedback=!1},2e3)},startAnimalsAnimation:function(){var e=this;this.animationTimer=setInterval(function(){e.animals.forEach(function(e){e.placed||(e.enclosurePosition={x:Math.floor(200*Math.random()),y:Math.floor(200*Math.random())})})},3e3)},stopAnimalsAnimation:function(){this.animationTimer&&(clearInterval(this.animationTimer),this.animationTimer=null)},startFireworks:function(){var e=this;if(this.$refs.fireworks){var i=this.$refs.fireworks;i.updateOptions({autoresize:!0,opacity:.5,acceleration:1.05,friction:.97,gravity:1.5,particles:50,traceLength:3,traceSpeed:10,explosion:5,intensity:30,flickering:50,lineStyle:"round",hue:{min:0,max:360},delay:{min:30,max:60},rocketsPoint:{min:50,max:50},lineWidth:{explosion:{min:1,max:3},trace:{min:1,max:2}},brightness:{min:50,max:80},decay:{min:.015,max:.03},mouse:{click:!1,move:!1,max:1}}),i.start(),this.fireworksTimer=setTimeout(function(){e.$refs.fireworks&&e.$refs.fireworks.stop()},1e4)}},resetGame:function(){this.$refs.fireworks&&this.$refs.fireworks.stop(),this.fireworksTimer&&(clearTimeout(this.fireworksTimer),this.fireworksTimer=null),this.initializeGame()}}};var T=a(1241);const w=(0,T.A)(A,[["render",v],["__scopeId","data-v-71be6e9e"]]),x=w}}]);
//# sourceMappingURL=628.173f8b24.js.map